<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Sun Ceramic</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --primary-bg: #050505;
            --secondary-bg: #0a0a0a;
            --card-bg: #111111;
            --text-main: #ffffff;
            --text-muted: #888888;
            --accent-gold: #D4AF37;
            --accent-gold-light: #F4Cf57;
            --accent-gold-dark: #AA8828;
            --border-color: #333333;
            --glass-bg: rgba(20, 20, 20, 0.8);
            --gradient-gold: linear-gradient(135deg, #D4AF37 0%, #F4Cf57 50%, #D4AF37 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-bg);
            color: var(--text-main);
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: transparent;
            transition: all 0.3s ease;
            padding: 20px 40px;
        }

        .header.scrolled {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: inline-block;
            transition: all 0.3s ease;
        }

        .logo-img {
            max-width: 180px;
            height: auto;
            display: block;
            transition: all 0.3s ease;
        }

        .header.scrolled .logo-img {
            max-width: 140px;
        }

        /* Product Container */
        .product-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .product-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        /* Image Gallery */
        .image-section {
            position: relative;
        }

        .main-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 8px;
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
        }

        .thumbnail-strip {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            overflow-x: auto;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .thumbnail.active {
            border-color: var(--accent-gold);
        }

        /* Product Info */
        .product-info h1 {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            margin-bottom: 20px;
            color: var(--text-main);
        }

        .specs {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .spec-item {
            padding: 15px;
            background: var(--secondary-bg);
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }

        .spec-label {
            font-size: 12px;
            color: var(--accent-gold);
            text-transform: uppercase;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        .spec-value {
            font-size: 16px;
            color: var(--text-main);
            font-weight: 600;
        }

        .description {
            line-height: 1.8;
            color: var(--text-muted);
            margin-bottom: 25px;
        }

        .description h3 {
            color: var(--text-main);
            font-family: 'Playfair Display', serif;
        }

        /* Navigation Arrows */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }

        .nav-btn {
            flex: 1;
            padding: 15px;
            background: var(--secondary-bg);
            color: var(--accent-gold);
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            border: 1px solid var(--accent-gold);
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: var(--accent-gold);
            color: var(--primary-bg);
        }

        .nav-btn.disabled {
            border-color: var(--border-color);
            color: var(--text-muted);
            pointer-events: none;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 100px 20px;
            font-size: 18px;
            color: var(--text-muted);
        }

        .error {
            background: #fee;
            color: #c00;
            padding: 20px;
            border-radius: 8px;
            margin: 40px auto;
            max-width: 600px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <header class="header" id="header">
        <div class="header-content">
            <!-- Logo -->
            <div class="logo">
                <img src="https://res.cloudinary.com/dcqre7nop/image/upload/v1769093754/output-onlinepngtools_2_jcik9a.png"
                    alt="SUN Exim Logo" class="logo-img">
            </div>

            <!-- Navigation will be added here if needed -->
        </div>
    </header>

    <!-- Add some padding to the top of the content to account for fixed header -->
    <style>
        .product-container {
            padding-top: 100px;
            /* Adjust based on your header height */
        }
    </style>

    <div class="product-container" id="productContainer">
        <div class="loading">Loading product...</div>
    </div>

    <script>
        // Header scroll effect
        document.addEventListener('DOMContentLoaded', function () {
            const headerElement = document.getElementById('header');

            function updateHeader() {
                const logoImg = document.querySelector('.logo-img');
                if (window.scrollY > 10) {
                    headerElement.classList.add('scrolled');
                    if (logoImg) logoImg.style.maxWidth = '140px';
                } else {
                    headerElement.classList.remove('scrolled');
                    if (logoImg) logoImg.style.maxWidth = '180px';
                }
            }

            // Initial check
            updateHeader();

            // Add scroll event listener
            window.addEventListener('scroll', updateHeader);
        });

        // Product display script
        // Get slug from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const slug = urlParams.get('slug');

        if (!slug) {
            document.getElementById('productContainer').innerHTML = '<div class="error">No product specified. Add ?slug=product-name to URL</div>';
        } else {
            loadProduct(slug);
        }

        // Fetch and display product
        async function loadProduct(slug) {
            try {
                const response = await fetch(`api.php?action=product&slug=${slug}`);
                const data = await response.json();

                if (data.success && data.product) {
                    displayProduct(data.product);
                } else {
                    document.getElementById('productContainer').innerHTML = '<div class="error">Product not found</div>';
                }
            } catch (error) {
                document.getElementById('productContainer').innerHTML = `<div class="error">Error loading product: ${error.message}</div>`;
            }
        }

        // Display product on page
        function displayProduct(product) {
            const container = document.getElementById('productContainer');

            // Main image
            const mainImage = product.images && product.images.length > 0
                ? product.images[0]
                : 'https://via.placeholder.com/500x500?text=No+Image';

            // Thumbnails
            let thumbnailsHTML = '';
            if (product.images && product.images.length > 1) {
                thumbnailsHTML = '<div class="thumbnail-strip">';
                product.images.forEach((img, index) => {
                    thumbnailsHTML += `<img src="${img}" class="thumbnail ${index === 0 ? 'active' : ''}" onclick="changeImage('${img}', this)">`;
                });
                thumbnailsHTML += '</div>';
            }

            // Specs
            let specsHTML = '';
            if (product.dimension) {
                specsHTML += `
                    <div class="spec-item">
                        <div class="spec-label">Dimension</div>
                        <div class="spec-value">${product.dimension}</div>
                    </div>
                `;
            }
            if (product.thickness) {
                specsHTML += `
                    <div class="spec-item">
                        <div class="spec-label">Thickness</div>
                        <div class="spec-value">${product.thickness}</div>
                    </div>
                `;
            }
            if (product.finish) {
                specsHTML += `
                    <div class="spec-item">
                        <div class="spec-label">Finish Type</div>
                        <div class="spec-value">${product.finish}</div>
                    </div>
                `;
            }
            if (product.category) {
                specsHTML += `
                    <div class="spec-item">
                        <div class="spec-label">Category</div>
                        <div class="spec-value">${product.category.name}</div>
                    </div>
                `;
            }

            // Description
            const descriptionHTML = product.description
                ? `<div class="description"><h3 style="margin-bottom: 10px;">Description</h3><p>${product.description}</p></div>`
                : '';

            // Navigation buttons
            const prevBtn = product.navigation && product.navigation.prev
                ? `<a href="product.html?slug=${product.navigation.prev}" class="nav-btn">← Previous Product</a>`
                : `<span class="nav-btn disabled">← Previous Product</span>`;

            const nextBtn = product.navigation && product.navigation.next
                ? `<a href="product.html?slug=${product.navigation.next}" class="nav-btn">Next Product →</a>`
                : `<span class="nav-btn disabled">Next Product →</span>`;

            // Build full HTML
            container.innerHTML = `
                <div class="product-grid">
                    <div class="image-section">
                        <img src="${mainImage}" alt="${product.name}" class="main-image" id="mainImage">
                        ${thumbnailsHTML}
                    </div>
                    
                    <div class="product-info">
                        <h1>${product.name}</h1>
                        <div class="specs">
                            ${specsHTML}
                        </div>
                        ${descriptionHTML}
                    </div>
                </div>
                
                <div class="navigation">
                    ${prevBtn}
                    ${nextBtn}
                </div>
            `;

            // Update page title
            document.title = `${product.name} - Sun Ceramic`;
        }

        // Change main image
        function changeImage(url, thumb) {
            document.getElementById('mainImage').src = url;
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
        }
    </script>
</body>

</html>